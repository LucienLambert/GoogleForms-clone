<app-nav-bar title="Answer Form"
             [backButtonVisible] = "backButtonVisible"
             class="toolbar-actions"
             (saveEvent)="saveButtonAction()"
            (backButtonEvent)="backButtonAction()">
    
    
    <button mat-icon-button prevQuestion class="navbarbtn" (click)="switchQuestion(questionTracker - 1)" [disabled]="questionTracker == 1">
        <span>&lt;</span>
    </button>

    <button mat-icon-button nextQuestion class="navbarbtn" (click)="switchQuestion(questionTracker + 1)" [disabled]="questionTracker >= questions.length ">
        <span>&gt;</span>
    </button>

    <button mat-icon-button deleteButton class="navbarbtn" [disabled]="!isInProgress()" (click)="deleteButtonAction()">
        <mat-icon>delete</mat-icon>
    </button>

    <button mat-icon-button saveButton class="navbarbtn" [disabled]="!isSaveable" (click)="saveButtonAction()">
        <mat-icon>save</mat-icon>
    </button>

</app-nav-bar>

<div class="instance-container">
    <div class="form-container">
        <div class="form-item">
            <div class="form-label">Title:</div>
            <div class="form-value">{{ form?.title }}</div>
        </div>
        <div class="form-item">
            <div class="form-label">Description:</div>
            <div class="form-value">{{ form?.description }}</div>
        </div>
        <div class="form-item">
            <div class="form-label">Started:</div>
            <div class="form-value">{{ instance?.started | date:'dd/MM/yyyy HH:mm:ss' }}</div>
        </div>
        <div class="form-item">
            <div class="form-label" *ngIf="!isInProgress(); else inProgress">Completed:</div>
            <div class="form-value" *ngIf="!isInProgress();">
                {{ instance?.completed | date:'dd/MM/yyyy HH:mm:ss' }} 
            </div>
                <ng-template #inProgress>
                    In Progress
                </ng-template>
        </div>
        
        <div *ngIf="questions.length > 0; else noQuestion">
            
            <p>Question {{questionTracker}}/{{questions.length}}</p>
        <app-instance-question-card [question]="currentQuestion" [questionType]="currentQuestion?.questionType" [answers]="currentAnswers" [isCompleted]="!isInProgress()" (updatedValuesEvent)="receiveValue($event)"></app-instance-question-card>
        </div>
        
        <ng-template #noQuestion>
            This form doesn't have any question!
        </ng-template>
    </div>
</div>
